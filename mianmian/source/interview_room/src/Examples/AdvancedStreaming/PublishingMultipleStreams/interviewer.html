<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>面面：面试官界面</title>

    <script src="../../../assets/js/express_sdk/ZegoExpressWebRTC.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.6.1/dist/av-min.js"></script>
    <script src="../../../../../../account/web_prepare01.js"></script>
    <script>
        // 初始化leancloud
        const { Query, User } = AV;
        AV.init({
            appId: "QINFwm0ds2NuLyRCmbpmUltw-gzGzoHsz",
            appKey: "16T8fLd7241TyCxCkCvAYPif",
            serverURL: "https://qinfwm0d.lc-cn-n1-shared.com"
        });

        urlinfo = window.location.href; //获取当前页面的url
        len = urlinfo.length;//获取url的长度
        offset = urlinfo.indexOf("?");//设置参数字符串开始的位置
        nowpath = urlinfo.substr(0, offset + 1); // 获取当前路径
        newsidinfo = urlinfo.substr(offset, len); //取出参数字符串 这里会获得类似“id=1”这样的字符串
        newsids = newsidinfo.split("=");//对获得的参数字符串按照“=”进行分割
        now_interview_number = newsids[1];//得到参数值
        newsname = newsids[0];//得到参数名字

        var last_flesh_chat_id = "", last_flesh_chat_time = new Date(2011,1,1);
        var interview_number = now_interview_number;
        var account_name = "";
        var vitae_sum=0, vitae_numbering=0, vitae_names = new Array(),
            assess_numbering=0, assess_id="";
        var interview_start = new Date(), interview_end = new Date(), interview_going_process=0;
        var had_init = false; // 是否初始化了
        // 日期转字符串
        function dateToString(date) {
            var y = date.getFullYear();
            var M = date.getMonth() + 1;
            var d = date.getDate();
            var H = date.getHours();
            var m = date.getMinutes();
            var s = date.getSeconds();
            return y + '-' + (M < 10 ? ('0' + M) : M) + '-' + (d < 10 ? ('0' + d) : d) + " " + (H < 10 ? ('0' + H) : H) + ":" + (m < 10 ? ('0' + m) : m) + ":" + (s < 10 ? ('0' + s) : s);
        }

        // 增加序号
        function editNumber(element) {
            let tmp_val = element.value;

            let numbering_id = tmp_val.split('.').length - 1;
            if (tmp_val[tmp_val.length-1] == ";" || tmp_val[tmp_val.length - 1] == "；") {
                tmp_val += ("\n" + (numbering_id+1)  + ".");
                element.value = tmp_val;
            }

        }

        // 增加聊天时间
        function addChatTime(chat_time) {
            let new_time = document.createElement("div");
            new_time.innerText = dateToString(chat_time);
            new_time.classList.add("time_show_message");
            document.getElementById("message_content_broad").appendChild(new_time);
        }

        // 添加消息
        function addChatMessage(sender_name, chat_content, is_interviewer, is_file) {
            if (sender_name == account_name) {
                let new_chat = document.createElement("div");
                new_chat.classList.add("me_show_pair");

                if (is_interviewer) sender_name = ("面试官："+sender_name);
                else sender_name = ("应聘者："+sender_name);
                if (is_file) {
                    let tmp_file_name = chat_content.split('/').pop();
                    let tmp_name_lth = 0, file_name="";
                    var pattern = new RegExp("[\u4E00-\u9FA5]+");

                    for (let i=0; i<tmp_file_name.length; i++) {
                        if (pattern.test(tmp_file_name[i])) {
                            tmp_name_lth += 10;
                        } else tmp_name_lth += 5;
                        if (tmp_name_lth < 46)
                            file_name+=tmp_file_name[i];
                        else {
                            file_name += "...";
                            break;
                        }
                    }

                    // 新建文件信息
                    new_chat.innerHTML = '<div class="me_show_name">' +
                        sender_name + '</div><div class="me_show_content">' + 
                            '<span class="file_message_icon"><img src="../../../../../../source/pic/icon_move-to-folder.png" alt="图标" srcset="" width="30px"></span><span class="file_message_titlebox"><div class="file_message_title">'+
                            file_name + '</div></span></div>';
                    new_chat.onclick = function () {
                        show_chat_file(chat_content);
                    }
                    document.getElementById("message_content_broad").appendChild(new_chat);
                    new_chat.scrollIntoView();
                } else {
                    new_chat.innerHTML = '<div class="me_show_name">' +
                        sender_name + '</div><div class="me_show_content">' + chat_content + '</div>';
                    document.getElementById("message_content_broad").appendChild(new_chat);
                    new_chat.scrollIntoView();
                }
            } else {
                let new_chat = document.createElement("div");
                new_chat.classList.add("other_show_pair");

                if (is_interviewer) sender_name = ("面试官：" + sender_name);
                else sender_name = ("应聘者：" + sender_name);

                if (is_file) {
                    let tmp_file_name = chat_content.split('/').pop();
                    let tmp_name_lth = 0, file_name = "";
                    var pattern = new RegExp("[\u4E00-\u9FA5]+");

                    for (let i = 0; i < tmp_file_name.length; i++) {
                        if (pattern.test(tmp_file_name[i])) {
                            tmp_name_lth += 10;
                        } else tmp_name_lth += 5;
                        if (tmp_name_lth < 46)
                            file_name += tmp_file_name[i];
                        else {
                            file_name += "...";
                            break;
                        }
                    }

                    // 新建文件信息
                    new_chat.innerHTML = '<div class="other_show_name">' +
                        sender_name + '</div><div class="other_show_content">' +
                        '<span class="file_message_icon"><img src="../../../../../../source/pic/icon_move-to-folder.png" alt="图标" srcset="" width="30px"></span><span class="file_message_titlebox"><div class="file_message_title">' +
                        file_name + '</div></span></div>';
                    new_chat.onclick = function () {
                        show_chat_file(chat_content);
                    }
                    document.getElementById("message_content_broad").appendChild(new_chat);
                    new_chat.scrollIntoView();
                } else {
                    new_chat.innerHTML = '<div class="other_show_name">' +
                        sender_name + '</div><div class="other_show_content">' + chat_content + '</div>';
                    document.getElementById("message_content_broad").appendChild(new_chat);
                    new_chat.scrollIntoView();
                }
            }
        }

        function regetMessage() {

            // 组查询
            const chatQuery = new AV.Query('InterviewChat');
            chatQuery.equalTo('interview_group_number', interview_number);
            chatQuery.ascending('createdAt');

            chatQuery.find().then((chat_msgs) => {
                console.log("getlth:",chat_msgs.length);

                let get_start = false;
                let is_public = document.getElementById("public_chat_btn").classList.contains("chose_message_title_case");

                for (let i = 0; i < chat_msgs.length; i++) {
                    if (get_start || last_flesh_chat_id=="") {
                        if (chat_msgs[i].get('is_public') != is_public) {
                            continue;
                        }
                        if (chat_msgs[i].get('createdAt').getTime() - last_flesh_chat_time.getTime() > 1000 * 60 * 5) {
                            last_flesh_chat_time = chat_msgs[i].get('createdAt');
                            addChatTime(last_flesh_chat_time);
                        }
                        addChatMessage(chat_msgs[i].get('sender_name'), chat_msgs[i].get('chat_content'),
                            chat_msgs[i].get('is_interviewer'), chat_msgs[i].get('is_file'));

                        last_flesh_chat_id = chat_msgs[i].get("objectId");
                        get_start = true;
                    } else if (chat_msgs[i].get("objectId") == last_flesh_chat_id) {
                        get_start = true;
                    }
                }


            });
        }

        function changeChat() {
            let is_public = document.getElementById("public_chat_btn").classList.contains("chose_message_title_case");
            if (is_public) {
                document.getElementById("public_chat_btn").classList.remove("chose_message_title_case");
                document.getElementById("private_chat_btn").classList.add("chose_message_title_case");
            } else {
                document.getElementById("public_chat_btn").classList.add("chose_message_title_case");
                document.getElementById("private_chat_btn").classList.remove("chose_message_title_case");
            }
            last_flesh_chat_id="";
            last_flesh_chat_time = new Date(2011, 1, 1);
            document.getElementById("message_content_broad").innerHTML = "";
        }

        function send_chat_message(is_file) {
            let chat_content = document.getElementById("send_message_content").value;
            let is_public = document.getElementById("public_chat_btn").classList.contains("chose_message_title_case");
            // 声明 class
            const InterviewChat = AV.Object.extend('InterviewChat');
            // 构建对象
            const interviewChat = new InterviewChat();

            // 为属性赋值
            interviewChat.set('chat_content', chat_content);
            interviewChat.set('sender_name', account_name);
            interviewChat.set('is_interviewer', true);
            interviewChat.set('is_public', is_public);
            interviewChat.set('interview_group_number', interview_number);
            if (is_file) interviewChat.set('is_file', true);

            // 将对象保存到云端
            interviewChat.save().then((todo) => {
                document.getElementById("send_message_content").value = "";
                // 成功保存之后，执行其他逻辑
                console.log(`保存成功。objectId：${todo.id}`);
            }, (error) => {
                // 异常处理
                console.log("上传失败");
            });
        }

        // 集成vitae处理函数
        function setVitaeAll(vitae) {
            // 删除原有元素
            let tmp_box = document.getElementsByClassName("attribute_pair1");
            for (let i=tmp_box.length-1;i>=0;i--) {
                tmp_box[i].parentNode.removeChild(tmp_box[i]);
            }
            // 设置姓名
            document.getElementById("vitae_name").innerText = vitae.get("person_name");
            // 设置邮箱
            document.getElementById("vitae_email").innerText = vitae.get("person_email");
            // 联系方式
            document.getElementById("vitae_tel").innerText = vitae.get("person_tel");
            // 出生日期
            document.getElementById("vitae_birthday").innerText = dateToString(vitae.get("person_birthday")).substr(0,10);
            // 新增受教育信息
            vitae_add_edu_exp(vitae.get("person_edu_school"), vitae.get("person_edu_starttime"),
                vitae.get("person_edu_endtime"), vitae.get("person_edu_professions"), vitae.get("person_edu_rank"));
            // 新增工作经历
            vitae_add_work_exp(vitae.get("person_work_starttime"), vitae.get("person_work_endtime"),
                vitae.get("person_work_comp"), vitae.get("person_work_job"));
            // 新增获奖经历
            vitae_add_reward_exp(vitae.get("person_reward_times"), vitae.get("person_reward_conts"));
            // 新增科研经历
            vitae_add_sci_exp(vitae.get("person_sci_starttime"), vitae.get("person_sci_endtime"),
                vitae.get("person_sci_content"));
            // 新增目标岗位
            vitae_add_target(vitae.get("person_target_jobs"));
            // 新增个人技能
            vitae_add_skill(vitae.get("person_skills"));
            // 新增个人性格
            document.getElementById("vitae_character").innerText = vitae.get("person_character");
        }

        // 简历相关函数
        function getVitae(vitae_number, isinit_web) {
            const groupQuery = new AV.Query('InterviewGroup');
            groupQuery.get(interview_number).then((interview_group) => {
                let candidateNames = interview_group.get("candidate_arr");
                document.getElementById("vitae_total_number").innerText = candidateNames.length;
                if (candidateNames.length == 0) {
                    console.log("暂未收到简历");
                    return;
                }
                // 保存面试时间
                interview_start = interview_group.get("start_time");
                interview_end = interview_group.get("end_time");
                // 保存面试进度
                interview_going_process = interview_group.get("interview_progress");

                // 保存面试人数
                vitae_names = candidateNames;
                vitae_sum = candidateNames.length;
                console.log("得到简历名单");


                if (vitae_number >= candidateNames.length)
                    vitae_number = 0;
                else if (vitae_number < 0)
                    vitae_number = candidateNames.length-1;
                
                vitae_numbering = vitae_number;

                // 初始化评价系统
                if (isinit_web)
                    loadAssess(0);

                document.getElementById("vitae_numbering").innerText = vitae_number+1;
                const vitaeQuery = new AV.Query('Vitae');
                vitaeQuery.equalTo('person_name', candidateNames[vitae_number]);
                vitaeQuery.find().then((vitaes_arr) => {
                    if (vitaes_arr.length == 0) {
                        console.log("当前未收到任何简历");
                        return;
                    }
                    setVitaeAll(vitaes_arr[0]);
                });
            });

        }

        // 初始化评价信息
        function loadAssess(assess_number) {
            if (assess_number<0) assess_number=vitae_sum-1;
            else if (assess_number>=vitae_sum) assess_number=0;
            assess_numbering = assess_number;
            document.getElementById("assess_totle_num").innerText = vitae_sum;
            document.getElementById("assess_numbering").innerText = assess_number+1;

            // 查询信息
            const AssessQuery0 = new AV.Query('InterviewAssess');
            AssessQuery0.equalTo('account_name', account_name);

            const AssessQuery1 = new AV.Query('InterviewAssess');
            // alert(vitae_names[assess_numbering]);
            AssessQuery1.equalTo('person_name', vitae_names[assess_numbering]);

            const AssessQuery2 = new AV.Query('InterviewAssess');
            AssessQuery2.equalTo('interview_group_number', interview_number);

            // 联合搜索
            const AssessQuery3 = AV.Query.and(AssessQuery0, AssessQuery1);
            const AssessQuery = AV.Query.and(AssessQuery2, AssessQuery3);

            AssessQuery.find().then((assess_arr) => {
                alert("al:"+ assess_arr.length);
                if (assess_arr.length == 0) {
                    document.getElementById("communicate_score_ipt").value = 5;
                    document.getElementById("ability_score_ipt").value = 5;
                    document.getElementById("quality_score_ipt").value = 5;

                    document.getElementById("person_superiority_ipt").value = "1.";
                    document.getElementById("person_inferiority_ipt").value = "1.";
                    document.getElementById("person_conclusion_ipt").value = "1.";

                    // 声明 class
                    const InterviewAssess = AV.Object.extend('InterviewAssess');
                    const tmpAssess = new InterviewAssess(); // 构建对象

                    // 为属性赋值
                    tmpAssess.set('account_name', account_name);
                    tmpAssess.set('interview_group_number', interview_number);
                    tmpAssess.set('person_name', vitae_names[assess_number]);
                    tmpAssess.set('person_numbering', assess_number);
                    tmpAssess.set('person_superiority', "1.");
                    tmpAssess.set('person_inferiority', "1.");
                    tmpAssess.set('person_conclusion', "1.");

                    // 将对象保存到云端
                    tmpAssess.save().then((todo) => {
                        // 成功保存之后，执行其他逻辑
                        console.log(`保存成功。objectId：${todo.id}`);
                        assess_id = todo.id;
                    }, (error) => {
                        // 异常处理
                    });
                } else {
                    assess_id = assess_arr[0].get("objectId");
                    document.getElementById("communicate_score_ipt").value = assess_arr[0].get("communicate_score");
                    document.getElementById("ability_score_ipt").value = assess_arr[0].get("ability_score");
                    document.getElementById("quality_score_ipt").value = assess_arr[0].get("quality_score");

                    document.getElementById("person_superiority_ipt").value = assess_arr[0].get("person_superiority");
                    document.getElementById("person_inferiority_ipt").value = assess_arr[0].get("person_inferiority");
                    document.getElementById("person_conclusion_ipt").value = assess_arr[0].get("person_conclusion");
                }
            });
        }

        // 保存评价信息
        function saveAssess() {
            const tmpAssess = AV.Object.createWithoutData('InterviewAssess', assess_id);
            tmpAssess.set('communicate_score', Number(document.getElementById("communicate_score_ipt").value));
            tmpAssess.set('ability_score', Number(document.getElementById("ability_score_ipt").value));
            tmpAssess.set('quality_score', Number(document.getElementById("quality_score_ipt").value));
            
            tmpAssess.set('person_superiority', document.getElementById("person_superiority_ipt").value);
            tmpAssess.set('person_inferiority', document.getElementById("person_inferiority_ipt").value);
            tmpAssess.set('person_conclusion', document.getElementById("person_conclusion_ipt").value);
            tmpAssess.save();
        }

        // 推流相关内容
        function setOnclicks() {
            // 提前保存按键
            var publish_ipt0 = document.getElementById("PublishID");
            var publish_ipt1 = document.getElementById("PublishSecondID");
            var play_ipt0 = document.getElementById("PlayID");
            var play_ipt1 = document.getElementById("PlaySecondID");

            var Publish_btn0 = document.getElementById("startPublishing");
            var Publish_btn1 = document.getElementById("startSecondPublishing");

            var mianmian_streams = ["0011", "0012", "0013", "0014"];
            // 尝试提前接入
            publish_ipt0.value = mianmian_streams[0];
            publish_ipt1.value = mianmian_streams[1];
            play_ipt0.value = mianmian_streams[2];
            play_ipt1.value = mianmian_streams[3];

            // 登录的设置
            document.getElementById("mianmian_init_btn").onclick = function() {
                if (had_init) {
                    alert("再次初始化前，请刷新网页。");
                    return;
                }
                document.getElementById("LoginRoom").click();
                setTimeout(()=>{
                    if (document.getElementById("roomStateErrorSvg").style.display == "none") {
                        alert("初始化成功。");
                        had_init = true;
                    } else {
                        alert("初始化失败，请刷新网页授权录制音频视频后重试。");
                    }
                }, 1500);
            }

            // 设置按键映射
            // 音频连接键
            document.getElementById("mianmian_camera_btn").onclick = function () {
                // 检查是否初始化
                if (!had_init) {
                    alert('请在初始化后进行音频的连接。');
                    return;
                }
                // 当按钮为停止连接屏幕
                if (Publish_btn0.innerText == "Stop Publishing") {
                    Publish_btn0.click();

                    setTimeout(() => {
                        if (Publish_btn0.innerText != "Stop Publishing") {
                            // 成功停止
                            console.log("音频连接以及结束");
                            const tmpInterview = AV.Object.createWithoutData('InterviewGroup', interview_number);
                            tmpInterview.set('interviewer_stream0', undefined);
                            tmpInterview.save();
                            document.getElementById("send_message_content").value = "面试官已经断开了音频连接。";
                            send_chat_message();

                            // 更改按键样式
                            document.getElementById("mianmian_camera_title").innerText = "连接音频";
                            document.getElementById("mianmian_camera_title").style.color = "#FFF";
                        } else {
                            // 失败的情况
                            console.log("断开音频连接失败");
                        }
                    }, 2500);
                } else {
                    Publish_btn0.click();

                    setTimeout(() => {
                        if (Publish_btn0.innerText == "Publishing Fail") {
                            // 检查是否是有人在说话
                            let interviewQuery = new AV.Query('InterviewGroup');
                            interviewQuery.get(interview_number).then((tmpInterview) => {
                                if (tmpInterview.get('interviewer_stream0')!=undefined && tmpInterview.get('interviewer_stream0') != "") {
                                    alert("请尝试刷新初始化后重试。");
                                } else {
                                    alert("当前有面试官在发言");
                                }
                                return;
                            });
                        } else {
                            document.getElementById("mianmian_camera_title").innerText = "停止连接";
                            document.getElementById("mianmian_camera_title").style.color = "#C42B1C";
                            
                            document.getElementById("send_message_content").value = "面试官已经开启了音频连接。";
                            send_chat_message()

                            // 保存信息
                            let tmpInterview = AV.Object.createWithoutData('InterviewGroup', interview_number);
                            tmpInterview.set('interviewer_stream0', account_name);
                            tmpInterview.save();
                        }
                    }, 5000);
                }
            }
            // 共享屏幕键
            document.getElementById("mianmian_showscream_btn").onclick = function () {
                if (!had_init) {
                    alert("请在初始化后进行屏幕共享。");
                    return;
                }
                // 当按钮为停止连接屏幕
                if (Publish_btn1.innerText == "Stop Publishing") {
                    Publish_btn1.click();

                    setTimeout(() => {
                        if (Publish_btn1.innerText != "Stop Publishing") {
                            // 成功停止
                            console.log("音视频连接已经结束");
                            const tmpInterview = AV.Object.createWithoutData('InterviewGroup', interview_number);
                            tmpInterview.set('interviewer_stream1', undefined);
                            tmpInterview.save();

                            document.getElementById("send_message_content").value = "面试官已经结束了屏幕共享。";
                            send_chat_message()

                            // 更改按键样式
                            document.getElementById("mianmian_showscream_title").innerText = "共享屏幕";
                            document.getElementById("mianmian_showscream_title").style.color = "#FFF";
                        } else {
                            // 失败的情况
                            console.log("断开共享屏幕失败");
                        }
                    }, 2500);
                } else {
                    Publish_btn1.click();

                    setTimeout(() => {
                        if (Publish_btn1.innerText == "Publishing Fail") {
                            // 检查是否是有人在说话
                            let interviewQuery = new AV.Query('InterviewGroup');
                            interviewQuery.get(interview_number).then((tmpInterview) => {
                                if (tmpInterview.get('interviewer_stream1') != undefined && tmpInterview.get('interviewer_stream1') != "") {
                                    alert("请尝试刷新初始化后重试。");
                                } else {
                                    alert("当前有面试官在发言");
                                }
                                return;
                            });
                        } else if (Publish_btn1.innerText == "Stop Publishing") {
                            document.getElementById("mianmian_showscream_title").innerText = "停止共享";
                            document.getElementById("mianmian_showscream_title").style.color = "#C42B1C";

                            document.getElementById("send_message_content").value = "面试官已经开启了屏幕共享。";
                            send_chat_message()

                            // 保存信息
                            let tmpInterview = AV.Object.createWithoutData('InterviewGroup', interview_number);
                            tmpInterview.set('interviewer_stream1', account_name);
                            tmpInterview.save();
                        } else {
                            
                            // 仍然失败，原因未知
                            console.log("共享屏幕：仍然失败，原因未知");
                        }
                    }, 6000);
                }
            }


        }

        // 拉流
        function getVideoStreams() {
            // 检查是否有在直播
            let audio_on = true, video_on = true;
            const interviewQuery = new AV.Query('InterviewGroup');
            interviewQuery.get(interview_number).then((tmp_interview) => {
                if (tmp_interview.get("interviewee_stream0")=="" || tmp_interview.get("interviewee_stream0")==undefined)
                    audio_on = false;
                if (tmp_interview.get("interviewee_stream1") == "" || tmp_interview.get("interviewee_stream1") == undefined)
                    video_on = false;
            });

            var Play_btn0 = document.getElementById("startPlaying");
            var Play_btn1 = document.getElementById("startSecondPlaying");
            
            // 音频拉流
            if (audio_on) {
                if (Play_btn0.innerText != "Stop Playing") {
                    Play_btn0.click();
                }
            }
            if (video_on) {
                if (Play_btn1.innerText != "Stop Playing") {
                    // alert("renran youwenti");
                    Play_btn1.click();
                }
            }
        }

        // 切换中屏内容
        function changeCenterVideo() {
            if (document.getElementById("mianmian_myvideo").style.display == "none") {
                document.getElementById("mianmian_myvideo").style.display = "block";
                document.getElementById("mianmian_video").style.display = "none";
            } else {
                document.getElementById("mianmian_myvideo").style.display = "none";
                document.getElementById("mianmian_video").style.display = "block";
            }
            // alert("mianmian_myvideo:"+ document.getElementById("mianmian_myvideo").style.display + "\nmianmian_video"+
            //     document.getElementById("mianmian_video").style.display);
        }

        // 展示内容
        function getCandidate_list() {
            let title_element = document.createElement("div");
            title_element.innerHTML = '<span class="candidate_list_name">姓名</span><span class="candidate_list_checkon" title="⭕表示迟到，√表示已签到，×表示未签到">签到</span><span class="candidate_list_interviewstate" title="⭕表示缺勤，√表示已面试，-表示排队中，◉表示面试中">面试进度</span>';
            let box_element = document.getElementById("candidate_list_box");
            box_element.innerHTML = "";
            box_element.appendChild(title_element);
            for (let i=0; i< vitae_names.length; i++) {
                let vitae_name = vitae_names[i];
                let signin_state = 0, interview_state=0;
                // 检查签到
                const vitaeQuery = new AV.Query('Vitae');
                vitaeQuery.equalTo('person_name', vitae_names[i]);
                vitaeQuery.find().then((vitaes_arr) => {
                    if (vitaes_arr.length == 0) {
                        console.log("简历丢失");
                        return;
                    } else {
                        if (vitaes_arr[0].get("interview_signin_state")==undefined || 
                            (interview_start.getTime()-vitaes_arr[0].get("interview_signin_state").getTime()) >= 1000*60*120) {
                            signin_state = "×";
                        } else if (interview_start.getTime()< vitaes_arr[0].get("interview_signin_state").getTime()) {
                            signin_state = "⭕";
                        } else {
                            signin_state = "√";
                        }
                        // 查询面试进度
                        const groupQuery = new AV.Query('InterviewGroup');
                        groupQuery.get(interview_number).then((interview_group) => {
                            interview_going_process = interview_group.get("interview_progress");
                            // if(interview_going_process ◉
                            if (vitaes_arr[0].get("interview_signin_state") == undefined ||
                                (interview_start.getTime() - vitaes_arr[0].get("interview_signin_state").getTime()) >= 1000 * 60 * 120) {
                                if (interview_going_process > (i + 1)) {
                                    interview_state = "⭕";
                                } else {
                                    interview_state = "×";
                                }
                            } else {
                                if (interview_going_process > (i + 1)) {
                                    interview_state = "√";
                                } else if (interview_going_process == (i + 1)) {
                                    interview_state = "◉";
                                } else {
                                    interview_state = "√";
                                }
                            }
                            // 检查面试情况
                            let new_person_element = document.createElement("div");
                            new_person_element.classList.add("candidate_list_box_title");
                            new_person_element.innerHTML = '<span class="candidate_list_name">'+vitae_names[i]+'</span><span class="candidate_list_checkon" title="⭕表示迟到，√表示已签到，×表示未签到">'+signin_state+'</span><span class="candidate_list_interviewstate" title="⭕表示缺勤，√表示已面试，-表示排队中">'+interview_state+'</span>';
                            box_element.appendChild(new_person_element);

                            // 显示内容
                            document.getElementById("candidate_list_window").style.display = "block";
                        });
                    }
                });
            }
        }

        // 发送文件
        function send_message_file() {
            document.getElementById("send_file_dialog").style.display = "block";
        }
        // 发送文件的上传等操作
        function send_chat_File() {
            if (document.getElementById('sendfile_via_slt').selectedIndex == 0) {
                alert("请选择上传文件的方式");
                return;
            } else if (document.getElementById("sendfile__ipt").value == "") {
                alert("请选择文件地址");
                return;
            }
            var file;
            // 上传URL
            if (document.getElementById('sendfile_via_slt').selectedIndex == 1) {
                let file_url = document.getElementById("sendfile__ipt").value;
                // 直接发送信息
                document.getElementById("send_message_content").value = file_url;
                send_chat_message(true);
                document.getElementById("sendfile__ipt").value = "";
                document.getElementById("chat_file_window").style.display = "none";
                return;
            } else {
                // 从本地上传
                const avatarUpload = document.getElementById('sendfile__ipt');
                let file_name = avatarUpload.value.split("\\").pop();
                if (!avatarUpload.files.length) {
                    alert("请输入正确的文件地址。");
                    avatarUpload.value = "";
                    return;
                }
                const localFile = avatarUpload.files[0];
                // 检测文件是否超出大小
                if (localFile.size > 5*1024*1024) {
                    alert("请选择5MB以下大小的文件");
                    avatarUpload.value = "";
                    return;
                }
                file = new AV.File(file_name, localFile);
            }
            // 保存文件
            file.save().then((file) => {
                console.log(`文件保存完成。URL：${file.url}`);
                // 发送文件的信息
                document.getElementById("send_message_content").value = file.get("url");
                send_chat_message(true);
                document.getElementById("sendfile__ipt").value = "";
                document.getElementById("chat_file_window").style.display = "none";
            }, (error) => {
                // 保存失败，可能是文件无法被读取，或者上传过程中出现问题
                alert("上传失败，文件的读取出现问题。");
                console.log("保存失败");
                document.getElementById("sendfile__ipt").value = "";
                document.getElementById("chat_file_window").style.display = "none";
            });
        }

        // 下一位面试者
        function getNextCandidate() {
            const interviewQuery = new AV.Query('InterviewGroup');
            interviewQuery.get(now_interview_number).then((now_interview) => {
                let lastupdate = now_interview.updatedAt;
                if (new Date().getTime() - lastupdate.getTime() < 1000*60) {
                    alert("工作组在一分钟内切换过下一位应聘者。请等待应聘者入场。");
                } else {
                    // alert(interview_going_process);
                    interview_going_process = now_interview.get("interview_progress")+1;
                    const todo = AV.Object.createWithoutData('InterviewGroup', interview_number);
                    todo.set('interview_progress', interview_going_process);
                    todo.save();
                }
            });
        }

        window.onload = function() {
            // 不展示不必要的内容
            document.getElementById("__vconsole").style.display = "none";

            // 登陆账户
            const loginQuery = new AV.Query('LoginState');
            let client_id = cans();
            loginQuery.equalTo('client_id', client_id);
            loginQuery.find().then((loginStates) => {
                if (loginStates.length > 0) {
                    // 判断是否过期
                    let nowdate = new Date();
                    if ((nowdate.getTime() - loginStates[0].get('createdAt').getTime()) / 1000 > 36000) {
                        alert("登录过期，请重新登录。");
                        location.assign("../../../../../../account/login.html");
                        return;
                    } else { // 成功登录
                        // 获取面试官账号名
                        // 检查工作组与人员是否对应
                        const accountQuery = new AV.Query('Account');
                        // 获取登陆者账号
                        accountQuery.get(loginStates[0].get("account_id")).then((now_account) => {
                            account_name = now_account.get("account_id"); // 获取账户名
                            
                            // 从面试安排寻找信息 interview_number
                            const interviewQuery = new AV.Query('InterviewGroup');
                            interviewQuery.get(interview_number).then((todo) => {
                                let now_group = todo.get("group_name");
                                let groupQuery = new AV.Query('WorkGroup');
                                groupQuery.equalTo("group_name", now_group);

                                vitae_names = todo.get('candidate_arr');
                                groupQuery.find().then((groups) => {
                                    if (groups.length <= 0) {
                                        alert("不存在该面试工作组。");
                                        location.assign("../../../../../../workspace.html");
                                        return;
                                    } else if (groups[0].get("mem_names").indexOf(now_account.get("account_id")) == -1) {
                                        alert("您尚未加入该面试工作组。");
                                        location.assign("../../../../../../workspace.html");
                                        return;
                                    } else {
                                        // 终于正常进入面试
                                        window_onload_inside0();
                                    }
                                });
                            });

                        });

                    }
                } else {
                    alert("请登录您的账号。");
                    location.assign("../../../../../../account/login.html");
                    return;
                }
            });


        }

        // window onload内层函数
        function window_onload_inside0() {
            document.getElementById("video1_box").style.height = Math.ceil(document.getElementById("center_content").offsetWidth * 0.75) + "px";
            // document.getElementById("video2_box").style.height = Math.ceil(document.getElementById("right_content").offsetWidth * 0.75) + "px";
            document.getElementById("video1_box").style.marginTop =
                Math.floor(document.getElementById("center_content").offsetHeight / 2 -
                    document.getElementById("video1_box").offsetHeight / 2) + "px";
            setInterval(() => {
                regetMessage();
            }, 5000);

            getVitae(0, true); // 初始化简历
            loadAssess(0); // 初始化评价

            // 推流登录开始 63b66749818b282518fd95da
            const zegoQuery = new AV.Query('ZegoUserID');
            zegoQuery.get('63b66749818b282518fd95da').then((now_user_lc) => {
                mianmian_user_id = now_user_lc.get("UserID");
                mianmian_token = now_user_lc.get("Token");
                mianmian_room_id = now_user_lc.get("RoomID")

                document.getElementById("UserID").value = mianmian_user_id;
                document.getElementById("RoomID").value = mianmian_room_id;
                document.getElementById("Token").value = mianmian_token;

                // 保存键位以及推流设置
                setOnclicks();

                // 拉流设置
                setInterval(() => {
                    getVideoStreams();
                }, 10000);

                // 发送文件设置
                document.getElementById("send_file_window").style.top = window.innerHeight / 2 - 135 + "px";
                document.getElementById("send_file_window").style.left = window.innerWidth / 2 - 150 + "px";
                document.getElementById("sendfile_via_slt").onchange = function () {
                    if (this.selectedIndex == 1) {
                        document.getElementById("sendfile__ipt").setAttribute("type", "text");
                        document.getElementById("sendfile_address_pair").style.visibility = "visible";
                    } else if (this.selectedIndex == 2) {
                        document.getElementById("sendfile__ipt").setAttribute("type", "file");
                        document.getElementById("sendfile_address_pair").style.visibility = "visible";
                    } else {
                        document.getElementById("sendfile_address_pair").style.visibility = "hidden";
                    }
                }

                // 应聘者信息设置
                document.getElementById("candidate_list_window").style.top = window.innerHeight / 2 - 176 + "px";
                document.getElementById("candidate_list_window").style.left = window.innerWidth / 2 - 175 + "px";

                // 计时器样式
                document.getElementById("calculagraph_window").style.left = window.innerWidth / 2 - 150 + "px";
                document.getElementById("calculagraph_window").style.top = window.innerHeight / 2 - 152 + "px";

                // 打开文件样式表
                document.getElementById("chat_file_window").style.left = window.innerWidth / 2 - 300 + "px";
                document.getElementById("chat_file_window").style.top = window.innerHeight / 2 - 262 + "px";
            });

        }
    </script>
    <style>
        html, body {
            width: 100%;
            min-width: 1100px;
            height: 100%;
            min-height: 550px;

            margin: 0;
        }
        body {
            background-color: #3B3F42;
        }

        .main_content {
            width: 100%;
            min-width: 1100px;
            height: 100%;
            overflow: hidden;
        }

        #top_title {
            width: 100%;
            float: left;

            height: 35px;
            background-color: #23272A;

            color: #eee;
            line-height: 35px;
            text-align: center;
        }

        #left_content {
            display: block;
            width: 350px;

            min-width: 200px;
            height: calc(100% - 35px);

            float: left;
            background-color: #aaa;
        }

        #center_content {
            display: block;

            float: left;
            width: calc(100% - 672px);
            min-width: 350px;
            height: calc(100% - 35px);

            overflow: hidden;
            background-color: #3B3F42;
            text-align: center;
        }

        #right_content {
            display: block;

            float: left;
            width: 300px;
            min-width: 200px;
            height: calc(100% - 35px);

            background-color: #3B3F42;
        }

        .size_change_width_btn {
            width: 10px;
            height: calc(100% - 35px);

            float: left;
            background-color: #aaa;
            color: #fff;

            vertical-align: middle;
            position: relative;
        }

        .size_change_height_btn {
            height: 10px;
            width: 100%;
            line-height: 10px;

            text-align: center;
            color: #fff;
            background-color: #aaa;
        }

        .size_change_height_btn:hover {
            background-color: #ccc;
            cursor: ns-resize;
            user-select: none;
        }
        
        .size_change_width_btn:hover {
            filter: brightness(1.2);
            cursor: ew-resize;
            user-select: none;
        }

        .size_change_width_btn div {
            position: absolute;
            top: calc(50% - 10px);
        }

        #resize_fuzhu_btn0 {
            position: absolute;
            margin-top: 35px;
        }
        
        #resize_fuzhu_btn2 {
            position: absolute;
        }

        /* 设置左侧信息栏 */
        #vitae_box {
            width: 100%;
            height: calc(50% - 5px);
            min-height: 200px;

            background-color: #3B3F42;
            position: relative;
        }
        #assess_note_box {
            width: 100%;
            height: calc(50% - 5px);
            min-height: 200px;

            background-color: #3B3F42;
            position: relative;
        }


        /* 简历中信息的设置 */
        #vitae_content {
            overflow-y: scroll;
            width: 100%;
            height: 100%;

            position: relative;
        }

        .attribute_pair, .attribute_pair0 {
            width: 90%;
            min-width: 150px;
            margin-left: auto;
            margin-right: auto;

            color: #fff;
            padding-top: 10px;
            padding-bottom: 10px;
        }
        .attribute_key {
            font-size: 15px;
            font-weight: 600;
        }
        .attribute_val {
            font-size: 18px;
            font-family: 'Times New Roman', Times, 'Simsun';
        }
        .attribute_pair1 {
            width: 90%;
            margin-left: auto;
            margin-right: auto;
            padding-top: 5px;
            padding-bottom: 5px;
        }
        .attribute_key1 {
            font-size: 14px;
            padding-top: 1px;
        }
        .attribute_val1 {
            font-size: 17px;
            font-family: 'Times New Roman', Times, 'Simsun';
            padding-bottom: 1px;
        }
        .vitae_title {
            font-size: 25px;
            font-family: 'Times New Roman', Times, 'Simsun';
            text-align: center;
        }
        /* 页面按键 */
        .vitae_btn_box,.assess_btn_box {
            position: absolute;
            right: 25px;
            bottom: 5px;
        }
        .vitae_btn_box .vitae_turn_page,
        .assess_btn_box .assess_turn_page {
            margin-top: 5px;
            margin-bottom: 5px;
            filter: invert(100%);
        }
        .vitae_btn_box .vitae_turn_page:hover,
        .assess_btn_box .assess_turn_page:hover {
            filter: invert(50%);
            cursor: pointer;
        }

        /* 记录栏信息 */
        #assess_content {
            overflow-y: scroll;
            width: 100%;
            height: 100%;
        }
        .assess_title {
            text-align: center;
            font-size: 25px;
            color: #fff;
            padding-top: 10px;
            padding-bottom: 10px;

            font-family: 'Times New Roman', Times, 'Simsun';
        }

        .assess_pair {
            width: 90%;
            margin-left: auto;
            margin-right: auto;

            color: #fff;
        }

        .assess_pair1 {
            width: 90%;
            margin-left: auto;
            margin-right: auto;
        }

        .assess_key0 {
            width: 100%;
            font-size: 16px;

            font-weight: 600;
        }

        .assess_key1 {
            width: 100%;
            font-size: 14px;
            margin-top: 5px;
        }

        .assess_score_ipt, .assess_text_ipt {
            width: 80%;
            margin-left: 5%;

            height: 25px;
            font-size: 20px;
            font-family: 'Times New Roman', Times, 'Simsun';

            border: 1px solid #fff;
            border-radius: 5px;

            text-indent: 10px;
            background-color: rgba(255, 255, 255, 0);
            color: #fff;

            margin-bottom: 5px;
        }

        .assess_text_ipt {
            height: 60px;
            resize: none;
            margin-top: 2px;

            text-indent: 0px;
            padding: 5px;
        }

        /* 中间视频栏目 */
        #video1_box {
            width: 100%;
            height: 240px;
            background-color: #000;

        }

        /* 右侧视频部分 */
        #video2_box {
            width: 100%;
            height: 225px;
            background-color: #000;
        }

        /* 右侧聊天框 */
        #message_box {
            width: 100%;
            height: calc(100% - 225px);

            background-color: #23272A;
        }
        #message_title {
            height: 35px;
            width: 100%;

            text-align: center;
            background-color: #54585b;
        }
        /* 信息发送按钮 */
        #message_send_box {
            height: 35px;
            width: 100%;

            background-color: #54585b;
            text-align: center;
        }
        .send_message_btn {
            width: 30px;
            height: 30px;
            margin-top: 2px;
            margin-left: 2px;
            margin-right: 3px;

            font-size: 16px;
            line-height: 30px;
            color: #fff;
            border-radius: 15px;

            display: inline-block;
            float: left;
            background-color: #71787e;
        }
        .send_message_btn img {
            margin-top: 5px;
            filter: invert(100%);
        }
        .send_message_btn:hover {
            filter: brightness(1.2);
            cursor: pointer;
            user-select: none;
        }

        .send_message_content_box {
            float: left;
            display: inline-block;
            height: 30px;
            width: calc(100% - 90px);

            padding-left: 5px;
            padding-right: 10px;
            padding-bottom: 3px;
        }
        #send_message_content {
            background-color: #71787e;
            color: #fff;

            height: 22px;
            border: 1px solid #b7bec4;
            font-size: 18px;

            border-radius: 8px;
            margin-top: 2px;
            padding-bottom: 5px;
            margin-right: 5px;
            width: 100%;

            text-indent: 5px;
            bottom: 5px;
        }

        /* 信息发送内容 */
        #message_content_box {
            width: 100%;
            height: calc(100% - 72px);
            text-align: center;

            background-color: #3B3F42;
            overflow-y: scroll;
        }
        #message_content_broad {
            width: 100%;
            height: 100%;
        }
        .time_show_message {
            padding-top: 5px;
            padding-bottom: 5px;
            font-size: 13px;

            color: #fff;
        }
        .other_show_pair {
            padding: 5px;
            text-align-last: left;

            color: #fff;
        }
        .other_show_name {
            font-size: 13px;

        }
        .other_show_content{
            font-size: 16px;

            margin-left: 10px;
            margin-right: 20px;
            padding: 5px;
            border-radius: 5px;
            max-width: calc(100% - 50px);

            word-wrap:break-word;
            word-break:break-all;
            
            display: inline-block;
            background-color: #5d6062;
        }
        .me_show_pair {
            padding: 5px;
            text-align-last: right;

            color: #fff;
        }
        .me_show_name {
            font-size: 13px;

        }
        .me_show_content{
            font-size: 16px;

            margin-left: 20px;
            margin-right: 10px;
            padding: 5px;
            border-radius: 5px;
            max-width: calc(100% - 50px);

            word-wrap:break-word;
            word-break:break-all;
            text-align: left;

            color: #000;
            display: inline-block;
            background-color: rgb(169, 210, 233);
        }
        /* 关于文件信息 */
        .file_message_icon {
            float: left;
            padding-left: 5px;
            filter: invert(100%);
            user-select: none;
            cursor: pointer;
        }
        .file_message_titlebox {
            float: left;
            padding-left: 5px;
            padding-right: 5px;
            cursor: pointer;
        }
        .file_message_title {
            margin-top: 8px;
            font-size: 12px;
            height: 16px;
            width: 80px;
            overflow: hidden;
        }

        /* 信息栏头部 */
        .message_title_case {
            display: inline-block;

            font-size: 18px;
            line-height: 25px;
            padding: 5px;
            padding-bottom: 2px;
            color: white;
            margin-left: 5px;
            margin-right: 5px;
        }
        .message_title_case:hover {
            border-bottom: 2px solid rgb(82, 103, 115);
            cursor: pointer;

        }
        .chose_message_title_case {
            border-bottom: 2px solid rgb(169, 210, 233);
        }

        /* 中侧设置按钮框 */
        #center_btn_box {
            position: absolute;
            bottom: 5px;
            height: 70px;
            /* width: 370px; */
            margin-left: calc(50% - 297px);

            background-color: rgba(100, 100, 100, 0.7);
            text-align: center;
            border-radius: 5px;
            /* background-color: #fff; */
        }

        .center_btn img {
            filter: invert(100%);
        }
        .center_btn {
            display: inline-block;
            font-size: 13px;
            color: #fff;
            background-color: rgba(100, 100, 100, 0.7);

            width: 60px;
            height: 55px;
            margin-top: 5px;
            margin-bottom: 5px;
            margin-left: 5px;
            margin-right: 5px;
            padding-top: 5px;

            border-radius: 5px;
            text-align: center;
        }
        .center_btn:hover {
            filter: brightness(0.8);
            cursor: pointer;
            user-select: none;
        }
    </style>
</head>
<body>

    <!-- 源loginin -->
    <button id="LoginRoom" class="play-pause-button" title="loginRoom()" style="width: 120px; display: none;">
        <div class="success-svg m-r-5" id="loginSuccessSvg" style="display: none;">
            <svg class="ft-green-tick" xmlns="http://www.w3.org/2000/svg" height="15" width="15" viewBox="0 0 48 48"
                aria-hidden="true">
                <circle class="circle" fill="#5bb543" cx="24" cy="24" r="22" />
                <path class="tick" fill="none" stroke="#FFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"
                    stroke-miterlimit="10" d="M14 27l5.917 4.917L34 17" />
            </svg>
        </div>
        Login Room
    </button>
    
    <!-- 隐藏后端内容 -->
    <!-- 第一个输出流视频，作为音频输出，不展示文字 -->
    <div class="preview-content" id="mianmian_video" style="display: none;">
        <div class="preview-action" style="display: none;">
            <div class="preview-info">
                <span data-lang="PublishCameraStream">您的摄像头内容</span>
            </div>
    
        </div>
        <video controls id="publishVideo" autoplay muted playsinline></video>
        <div id="localVideo1"></div>
    </div>
    
    <!-- 无用部分 -->
    <div class="preloader" style="display: none;">
        <svg class="circular" viewBox="25 25 50 50">
            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
        </svg>
    </div>
    
    <div class="container main-wrapper" style="display: none;">
        <!-- <div class="row"> -->
    
        <div class="page-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12 login-wrapper">
                        <h6 data-lang="Preconditions">前置条件</h6>
                        <div class="login-desc" data-lang="PreconditionsDesc">
                            体验该功能，需要模拟一个用户（UserID）登陆到对应的房间（RoomID）中，并且有权限（Token）时才可以登陆成功。
                        </div>
                        <div class="form-wrap font-14 row">
                            <div class="form-item col-12 col-lg-4">
                                <span>RoomID</span>
                                <div class="icon-question">?
                                    <div class="pop-box" data-lang="RoomIDDesc">Tooltip text</div>
                                </div>
                                <input type="text" id="RoomID" />
                            </div>
                            <div class="form-item col-12 col-lg-4">
                                <span>UserID</span>
                                <div class="icon-question">?
                                    <div class="pop-box">
                                        <span data-lang="UserIDDesc"></span>
                                    </div>
                                </div>
                                <input type="text" id="UserID" />
                            </div>
                            <div class="form-item col-12 col-lg-4">
                                <span>Token</span>
                                <div class="icon-question">?
                                    <div class="pop-box">
                                        <span data-lang="TokenDesc"></span>
                                        <a href="https://console.zego.im" data-lang="ApplyToken" target="_blank"></a>
                                    </div>
                                </div>
                                <input type="text" class="w-70" id="Token" />
                            </div>
                        </div>
    
                    </div>
                </div>
                <div class="preview-roomInfo">
                    RoomID:&nbsp;<div id="roomInfo-id" class="m-r-10"></div>
                    RoomState:&nbsp;<div id="roomInfo-state">
                        <div class="success-svg" id="roomStateSuccessSvg" style="display: none;">
                            <svg class="ft-green-tick" xmlns="http://www.w3.org/2000/svg" height="10" width="10"
                                viewBox="0 0 48 48" aria-hidden="true">
                                <circle class="circle" fill="#5bb543" cx="24" cy="24" r="22" />
                            </svg>
                        </div>
                        <div class="error-svg" id="roomStateErrorSvg" style="display: inline-block;">
                            <svg class="ft-green-tick" xmlns="http://www.w3.org/2000/svg" height="10" width="10"
                                viewBox="0 0 48 48" aria-hidden="true">
                                <circle class="circle" fill="#5bb543" cx="24" cy="24" r="22" />
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 preview-wrapper m-t-10">
                        <div class="font-bold">Step1</div>
                        <div class="row" id="videoList">
                            <div class="preview-pushlishInfo col-6 m-b-10">
    
                                <div class="">
                                    <div class="m-t-10 m-b-5">
                                        Publish StreamID <input class="m-l-10" type="text" id="PublishID" />
                                    </div>
                                    <button id="startPublishing" class="m-b-5 configBtn play-pause-button"
                                        title="createStream() / startPublishingStream()">Start Publishing</button>
                                </div>
                            </div>
                            <div class="preview-pushlishInfo col-6 m-b-10">
    
                                <div class="">
                                    <div class="m-t-10 m-b-5">
                                        Publish StreamID <input class="m-l-10" type="text" id="PublishSecondID" />
                                    </div>
                                    <button id="startSecondPublishing" class="m-b-5 configBtn play-pause-button"
                                        title="createStream() / startPublishingStream()">Start
                                        Publishing</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 preview-wrapper m-t-10">
                        <div class="font-bold">Step2</div>
                        <div class="row" id="videoList">
                            <div class="preview-playInfo col-6 m-b-10">
    
                                <div class="">
                                    <div class="m-t-10 m-b-5">
                                        Playing StreamID <input class="m-l-10" type="text" id="PlayID" />
                                    </div>
                                    <button id="startPlaying" class="m-b-5 configBtn play-pause-button"
                                        title="startPlayingStream()">Start Playing</button>
                                </div>
                            </div>
                            <div class="preview-playInfo col-6">
    
                                <div class="">
                                    <div class="m-t-10 m-b-5">
                                        Playing StreamID <input class="m-l-10" type="text" id="PlaySecondID" />
                                    </div>
                                    <button id="startSecondPlaying" class="m-b-5 configBtn play-pause-button"
                                        title="startPlayingStream()">Start Playing</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <ul class="goToDoc">
                <li>
                    <span data-lang="HelpDocsVideoCodec"> Web 端视频编码默认使用 VP8。如果需要体验和其他端互通或者转推 CDN 功能，请在调试与配置页面修改为
                        H.264。</span>
                    &nbsp;
                    <a href="../../DebugAndConfig/LogAndVersionAndDebug/index.html" data-lang="HelpSettingsPage"
                        target="_blank">
                        点击修改 </a>
                </li>
                <li>
                    <span data-lang="MoreDocs">更多文档，请跳转至即构 </span> &nbsp;
                    <a href="https://doc-zh.zego.im/article/4855" data-lang="HelpDocs" target="_blank"> 帮助文档 </a>
                </li>
            </ul>
        </div>
        <!-- </div> -->
    </div>


<!-- 有用内容 -->
    <div class="main_content">
        <div id="top_title" title="面试信息">
            面面会议：面试官端画面 
        </div>

        <!-- 左侧信息栏 -->
        <span id="left_content">

            <div id="vitae_box">
                <div id="vitae_content">
                    <div class="attribute_pair">
                        <div class="vitae_title">
                            简历详情 <span id="vitae_numbering"></span>/
                            <span id="vitae_total_number"></span>
                        </div>
                    </div>
                    <!-- 姓名 -->
                    <div class="attribute_pair">
                        <div class="attribute_key">
                            姓名
                        </div>
                        <div class="attribute_val" id="vitae_name">
                            应聘者姓名
                        </div>
                    </div>
                    <!-- 联系方式 -->
                    <div class="attribute_pair">
                        <div class="attribute_key">
                            邮箱
                        </div>
                        <div class="attribute_val" id="vitae_email">
                            邮箱地址
                        </div>
                    </div>
                    <div class="attribute_pair">
                        <div class="attribute_key">
                            联系方式
                        </div>
                        <div class="attribute_val" id="vitae_tel">
                            电话
                        </div>
                    </div>
                    <!-- 出生日期 -->
                    <div class="attribute_pair">
                        <div class="attribute_key">
                            出生日期
                        </div>
                        <div class="attribute_val" id="vitae_birthday">
                            年-月-日
                        </div>
                    </div>

<script>
    // 新增受教育信息
    function vitae_add_edu_exp(vitae_school_list, vitae_start_list, vitae_end_list, vitae_prof_list, vitae_rank_list) {
        let rank_turn = ["中专", "大专", "本科", "硕士", "博士"];
        for (let i=0; i<vitae_school_list.length; i++) {
            let div_vitae_eduexp = document.createElement("div");
            div_vitae_eduexp.classList.add("attribute_pair1");
            div_vitae_eduexp.innerHTML = 
                '<div class="attribute_key1">时间</div>'
                +'<div class="attribute_val1">'+dateToString(vitae_start_list[i]).substr(0,10)+' > '+dateToString(vitae_end_list[i]).substr(0,10)+'</div>'
                +'<div class="attribute_key1">学校</div>'
                +'<div class="attribute_val1">'+vitae_school_list[i]+'</div>'
                +'<div class="attribute_key1">专业</div>'
                +'<div class="attribute_val1">'+vitae_prof_list[i]+'</div>'
                +'<div class="attribute_key1">学位</div>'
                +'<div class="attribute_val1">'+rank_turn[vitae_rank_list[i]-1]+'</div>';
            document.getElementById("vitae_eduexp_box").appendChild(div_vitae_eduexp);
        }
    }

</script>
                    <!-- 受教育经历 -->
                    <div class="attribute_pair0" id="vitae_eduexp_box">
                        <div class="attribute_pair0_title">
                            受教育经历
                        </div>
                        <div class="attribute_pair1" style="display: none;">
                            <div class="attribute_key1">时间</div>
                            <div class="attribute_val1">年-月-日 > 年-月-日</div>
                            <div class="attribute_key1">学校</div>
                            <div class="attribute_val1">xx职业技术学院</div>
                            <div class="attribute_key1">专业</div>
                            <div class="attribute_val1">xx工程</div>
                            <div class="attribute_key1">学位</div>
                            <div class="attribute_val1">本科</div>
                        </div>
                    </div>

<script>
    // 新增工作经历
    function vitae_add_work_exp(vitae_start_list, vitae_end_list, vitae_comp_list, vitae_job_list) {
        for (let i=0; i< vitae_start_list.length; i++) {
            let div_vitae_workexp = document.createElement("div");
            div_vitae_workexp.classList.add("attribute_pair1");
            div_vitae_workexp.innerHTML =
                '<div class="attribute_key1">时间</div>'
                +'<div class="attribute_val1">'+dateToString(vitae_start_list[i]).substr(0,10)+' > '+dateToString(vitae_end_list[i]).substr(0,10)+'</div>'
                +'<div class="attribute_key1">企业</div>'
                +'<div class="attribute_val1">'+vitae_comp_list[i]+'</div>'
                +'<div class="attribute_key1">职位</div>'
                +'<div class="attribute_val1">'+vitae_job_list[i]+'</div>';
            document.getElementById("vitae_workexp_box").appendChild(div_vitae_workexp);
        }
    }

</script>
                    <!-- 工作经历 -->
                    <div class="attribute_pair0" id="vitae_workexp_box">
                        <div class="attribute_pair0_title">
                            工作经历
                        </div>
                        <div class="attribute_pair1" style="display: none;">
                            <div class="attribute_key1">时间</div>
                            <div class="attribute_val1">年-月-日 > 年-月-日</div>
                            <div class="attribute_key1">企业</div>
                            <div class="attribute_val1">xx公司</div>
                            <div class="attribute_key1">职位</div>
                            <div class="attribute_val1">xx岗</div>
                        </div>
                    </div>

<script>
    // 新增获奖经历
    function vitae_add_reward_exp(vitae_time_list, vitae_reward_list) {
        for (let i = 0; i < vitae_time_list.length; i++) {
            let div_vitae_workexp = document.createElement("div");
            div_vitae_workexp.classList.add("attribute_pair1");
            div_vitae_workexp.innerHTML =
                '<div class="attribute_key1">时间</div>'+
                '<div class="attribute_val1">' + dateToString(vitae_time_list[i]).substr(0, 10) + '</div>'+
                '<div class="attribute_key1">奖项</div>'+
                '<div class="attribute_val1">'+vitae_reward_list[2*i]+'</div>'+
                '<div class="attribute_key1">获奖原因</div>'+
                '<div class="attribute_val1">'+ vitae_reward_list[2*i+1]+'</div>';
            document.getElementById("vitae_reward_box").appendChild(div_vitae_workexp);
        }
    }

</script>
                    <!-- 获奖经历 -->
                    <div class="attribute_pair0" id="vitae_reward_box">
                        <div class="attribute_pair0_title">
                            获奖经历
                        </div>
                        <div class="attribute_pair1" style="display: none;">
                            <div class="attribute_key1">时间</div>
                            <div class="attribute_val1">年-月-日</div>
                            <div class="attribute_key1">奖项</div>
                            <div class="attribute_val1">xx</div>
                            <div class="attribute_key1">获奖原因</div>
                            <div class="attribute_val1">xx</div>
                        </div>
                    </div>

<script>
    // 新增科研经历
    function vitae_add_sci_exp(vitae_start_list, vitae_end_list, vitae_scicontent_list) {
        for (let i=0; i< vitae_start_list.length; i++) {
            let div_vitae_workexp = document.createElement("div");
            div_vitae_workexp.classList.add("attribute_pair1");
            div_vitae_workexp.innerHTML =
                '<div class="attribute_key1">时间</div>'+
                '<div class="attribute_val1">'+dateToString(vitae_start_list[i]).substr(0,10)+' > '+dateToString(vitae_end_list[i]).substr(0,10)+'</div>'+
                '<div class="attribute_key1">课题内容</div>'+
                '<div class="attribute_val1">'+vitae_scicontent_list[2*i]+'</div>'+
                '<div class="attribute_key1">参与工作</div>'+
                '<div class="attribute_val1">'+vitae_scicontent_list[2*i+1]+'</div>';

            document.getElementById("vitae_sciexp_box").appendChild(div_vitae_workexp);
        }
    }

</script>
                    <!-- 科研经历 -->
                    <div class="attribute_pair0" id="vitae_sciexp_box">
                        <div class="attribute_pair0_title">
                            科研经历
                        </div>
                        <div class="attribute_pair1" style="display: none;">
                            <div class="attribute_key1">时间</div>
                            <div class="attribute_val1">年-月-日 > 年-月-日</div>
                            <div class="attribute_key1">课题内容</div>
                            <div class="attribute_val1">xx</div>
                            <div class="attribute_key1">参与工作</div>
                            <div class="attribute_val1">xx</div>
                        </div>
                    </div>

<script>
    // 新增目标岗位
    function vitae_add_target(vitae_target_list) {
        for (let i=0; i< vitae_target_list.length; i++) {
            let div_vitae_workexp = document.createElement("div");
            div_vitae_workexp.classList.add("attribute_pair1");
            div_vitae_workexp.innerHTML =
                '<div class="attribute_key1">第'+(i+1)+'志愿</div>'+
                '<div class="attribute_val1">'+vitae_target_list[i]+'</div>';

            document.getElementById("vitae_target_box").appendChild(div_vitae_workexp);
        }
    }

</script>
                    <!-- 目标岗位 -->
                    <div class="attribute_pair0" id="vitae_target_box">
                        <div class="attribute_pair0_title">
                            目标岗位
                        </div>
                        <div class="attribute_pair1" style="display: none;">
                            <div class="attribute_key1">第一志愿</div>
                            <div class="attribute_val1">岗位内容</div>
                        </div>
                    </div>

<script>
    // 新增个人技能
    function vitae_add_skill(vitae_skill_list) {
        for (let i=0; i< vitae_skill_list.length; i++) {
            let div_vitae_workexp = document.createElement("div");
            div_vitae_workexp.classList.add("attribute_pair1");
            div_vitae_workexp.innerHTML =
                '<div class="attribute_key1">技能概述</div>'
                +'<div class="attribute_val1">'+ vitae_skill_list[i]+'</div>';

            document.getElementById("vitae_skill_box").appendChild(div_vitae_workexp);
        }
    }

</script>
                    <!-- 个人技能 -->
                    <div class="attribute_pair0" id="vitae_skill_box">
                        <div class="attribute_pair0_title">
                            个人技能
                        </div>
                        <div class="attribute_pair1" style="display: none;">
                            <div class="attribute_key1">技能概述</div>
                            <div class="attribute_val1">技能内容</div>
                        </div>
                    </div>

                    <!-- 性格自述 -->
                    <div class="attribute_pair">
                        <div class="attribute_key">
                            性格自述
                        </div>
                        <div class="attribute_val" id="vitae_character">
                            个人性格
                        </div>
                    </div>
                    <div style="width: 100%; height: 50px;"></div>
                </div>
                <div class="vitae_btn_box">
                    <div class="vitae_turn_page">
                        <img src="../../../../../../source/pic/icon_left.png" alt="" srcset="" width="30px"
                            onclick="getVitae(vitae_numbering-1);">
                    </div>
                    <div class="vitae_turn_page">
                        <img src="../../../../../../source/pic/icon_right.png" alt="" srcset="" width="30px"
                            onclick="getVitae(vitae_numbering+1);">
                    </div>
                </div>

            </div>

            <span class="size_change_height_btn" id="resize_btn3" style="background-color: #aaa;">
                <div>═</div>
            </span>

            <div id="assess_note_box">
                <div id="assess_content">
                    <div class="assess_title">
                        <span id="assess_numbering">xxx</span>
                        /
                        <span id="assess_totle_num">xxx</span>
                        面试评价
                    </div>
                    <div class="assess_pair">
                        <div class="assess_key0">
                            面试官评分
                        </div>
                        <div class="assess_pair1">
                            <div class="assess_key1">
                                沟通交流
                            </div>
                            <div class="assess_val1">
                                <input class="assess_score_ipt" id="communicate_score_ipt"
                                    type="number" name="" step="1" min="0" max="5">
                            </div>
                        </div>
                        <div class="assess_pair1">
                            <div class="assess_key1">
                                个人能力
                            </div>
                            <div class="assess_val1">
                                <input class="assess_score_ipt" id="ability_score_ipt"
                                    type="number" name="" step="1" min="0" max="5">
                            </div>
                        </div>
                        <div class="assess_pair1">
                            <div class="assess_key1">
                                工作素养
                            </div>
                            <div class="assess_val1">
                                <input class="assess_score_ipt" id="quality_score_ipt"
                                    type="number" name="" step="1" min="0" max="5">
                            </div>
                        </div>
                    </div>
                    <!-- 面试官评价 -->
                    <div class="assess_pair">
                        <div class="assess_key0">
                            面试官评价
                        </div>
                        <div class="assess_pair1">
                            <div class="assess_key1">
                                优势
                            </div>
                            <div class="assess_val1">
                                <textarea class="assess_text_ipt" name="" id="person_superiority_ipt" cols="30" rows="10"
                                    onkeyup="editNumber(this);" title="输入分号；自动生成序号">1.</textarea>
                            </div>
                        </div>
                        <div class="assess_pair1">
                            <div class="assess_key1">
                                劣势
                            </div>
                            <div class="assess_val1">
                                <textarea class="assess_text_ipt" name="" id="person_inferiority_ipt" cols="30" rows="10"
                                    onkeyup="editNumber(this);" title="输入分号；自动生成序号">1.</textarea>
                            </div>
                        </div>
                        <div class="assess_pair1">
                            <div class="assess_key1">
                                总体评价
                            </div>
                            <div class="assess_val1">
                                <textarea class="assess_text_ipt" name="" id="person_conclusion_ipt" cols="30" rows="10"
                                    onkeyup="editNumber(this);" title="输入分号；自动生成序号">1.</textarea>
                            </div>
                        </div>
                    </div>
                    <div style="height: 20px; width: 100px;"></div>
                </div>
                <div class="assess_btn_box">
                    <div class="assess_turn_page">
                        <img src="../../../../../../source/pic/icon_left.png" alt="" srcset="" width="30px"
                            onclick="loadAssess(assess_numbering-1);">
                    </div>
                    <div class="assess_turn_page">
                        <img src="../../../../../../source/pic/icon_right.png" alt="" srcset="" width="30px"
                            onclick="loadAssess(assess_numbering+1);">
                    </div>
                    <div class="assess_turn_page">
                        <img src="../../../../../../source/pic/icon_telegram.png" alt="" srcset="" width="30px"
                            onclick="saveAssess();" title="保存">
                    </div>
                </div>
            </div>
            <!-- 移动辅助线 -->
            <span class="size_change_height_btn" id="resize_fuzhu_btn2" style="display: none; background-color: rgba(255, 255, 255, 0.6);">
                <div>═</div>
            </span>
        </span>
        <span class="size_change_width_btn" id="resize_btn1"><div>‖</div></span>

        <!-- 中央信息栏 -->
        <span id="center_content">
            <div id="video1_box">
                <!-- 第二个输出流视频 -->
                <div class="preview-content" id="mianmian_myvideo" style="height: 100%; width: 100%; display: none;"
                    title="您的屏幕共享内容">
                    <div class="preview-action" style="display: none;">
                        <div class="preview-info">
                            <span data-lang="PublishScreenStream">您的屏幕共享内容</span>
                        </div>
                
                    </div>
                    <video controls id="publishSecondVideo" autoplay muted playsinline></video>
                    <div id="localVideo2"></div>
                </div>
                
                <!-- 第二个输入流视频 -->
                <div class="preview-content" id="mianmian_video" style="height: 100%; width: 100%; display: block;"
                    title="应聘者屏幕共享内容">
                    <div class="preview-action" style="display: none;">
                        <div class="preview-info">
                            <span data-lang="PlaySecondStream">应聘者屏幕共享内容</span>
                        </div>
                
                    </div>
                    <video controls id="playSecondVideo" autoplay playsinline></video>
                    <div id="remoteVideo2"></div>
                </div>

            </div>
        </span>

        <span class="size_change_width_btn" id="resize_btn2">
            <div>‖</div>
        </span>

        <!-- 右侧信息栏目 -->
        <span id="right_content">
            <div id="video2_box">
                <!-- 第一个输入流视频，应聘者音视频输出 -->
                <div class="preview-content" style="width: 100%; height: 100%;">
                    <div class="preview-action" style="display: none;">
                        <div class="preview-info">
                            <span data-lang="PlayFirstStream">Play First Stream</span>
                        </div>
                    </div>
                    <video controls id="playVideo" autoplay playsinline></video>
                    <div id="remoteVideo1"></div>
                </div>
            </div>
            <div id="message_box">
                <!-- 消息头部选项 -->
                <div id="message_title">
                    <span class="message_title_case chose_message_title_case" id="public_chat_btn"
                        onclick="changeChat()">公共频道</span>
                    <span class="message_title_case" id="private_chat_btn"
                        onclick="changeChat();">面试组频道</span>
                </div>
                <!-- 信息栏目 -->
                <div id="message_content_box">
                    <div id="message_content_broad">
                        <!-- <div class="time_show_message">
                            xxxx-xx-xx xx:xx
                        </div>
                        <div class="other_show_pair">
                            <div class="other_show_name">
                                xxx
                            </div>
                            <div class="other_show_content">
                                xxxneirong 
                            </div>
                        </div>
                        <div class="me_show_pair">
                            <div class="me_show_name">
                                wo
                            </div>
                            <div class="me_show_content">
                                xxx_show_messagesaddddddddddddddddddddddddddddddddddddddddddddddd
                            </div>
                        </div> -->
                    </div>
                </div>
                <!-- 信息发送按钮 -->
                <div id="message_send_box">
                    <span class="send_message_content_box">
                        <input id="send_message_content" type="text">
                        <!-- <div style="height: 5px; width: 100%; background-color: rgba(255, 255, 255, 0); line-height: 5px; font-size: 1px;">dfg</div> -->
                    </span>
                    <span class="send_message_btn" onclick="document.getElementById('send_file_window').style.display = 'block';">
                        <img src="../../../../../../source/pic/icon_move-to-folder-2.png" width="20px" alt="" srcset="">
                    </span>
                    <span class="send_message_btn" onclick="send_chat_message();">
                        <img src="../../../../../../source/pic/icon_check.png" width="20px" alt="" srcset="">
                    </span>
                </div>
            </div>
        </span>

        <div id="center_btn_box">
            <div class="center_btn" id="mianmian_init_btn" title="请在通过音频、视频授权后点击初始化，否则请刷新网页重新授权。">
                <img src="../../../../../../source/pic/icon_snowplow.png" alt="" srcset="" width="35px">
                <div class="center_btn_title">
                    初始化
                </div>
            </div>
            <div class="center_btn" id="mianmian_camera_btn" title="为保证音频质量，面试官请勿同时开启音频">
                <img src="../../../../../../source/pic/icon_microphone.png" alt="" srcset="" width="35px">
                <div class="center_btn_title" id="mianmian_camera_title">
                    开启音频
                </div>
            </div>
            <div class="center_btn" title="为保证音频质量，面试官请勿同时开启音频" id="mianmian_showscream_btn">
                <img src="../../../../../../source/pic/icon_display-code.png" alt="" srcset="" width="35px">
                <div class="center_btn_title" id="mianmian_showscream_title">
                    屏幕共享
                </div>
            </div>
            <div class="center_btn" title="切换面试官共享的屏幕与自己的屏幕" id="mianmian_changescream_btn" onclick="changeCenterVideo();">
                <img src="../../../../../../source/pic/icon_replace.png" alt="" srcset="" width="35px">
                <div class="center_btn_title" id="mianmian_changescream_title">
                    切换屏幕
                </div>
            </div>
            <div class="center_btn" title="切换到下一位面试者" onclick="getNextCandidate();">
                <img src="../../../../../../source/pic/icon_people-arrows-left-right.png" alt="" srcset="" width="35px">
                <div class="center_btn_title" >
                    下一位
                </div>
            </div>
            <div class="center_btn" title="为保证音频质量，面试官请勿同时开启音频" onclick="getCandidate_list();">
                <img src="../../../../../../source/pic/icon_ballot.png" alt="" srcset="" width="35px">
                <div class="center_btn_title">
                    面试名单
                </div>
            </div>
            <div class="center_btn" title="为保证音频质量，面试官请勿同时开启音频" onclick="document.getElementById('calculagraph_window').style.display = 'block';">
                <img src="../../../../../../source/pic/icon_time-half-past.png" alt="" srcset="" width="35px">
                <div class="center_btn_title">
                    定时器
                </div>
            </div>
            <div class="center_btn" title="为保证音频质量，面试官请勿同时开启音频">
                <img src="../../../../../../source/pic/icon_sign-out-alt.png" alt="" srcset="" width="35px">
                <div class="center_btn_title">
                    结束面试
                </div>
            </div>
        </div>


<!-- 发送文件样式文件 -->
<style>
    #send_file_window {
        width: 300px;

        background-color: rgb(250, 250, 250);
        border-radius: 8px;

        position: absolute;

        overflow: hidden;
    }

    .send_file_title {
        font-size: 20px;
        padding: 20px;
        padding-top: 30px;
    }

    /* 按键框 */
    .sendfile_dialog_btnbox {
        width: 100%;
        padding-top: 10px;
        padding-bottom: 10px;

        /* padding-right: 20px; */
        text-align: center;

        background-color: #eee;
    }

    .sendfile_btn {
        font-size: 15px;
        text-align: center;

        display: inline-block;
        padding: 3px;
        padding-left: 10px;
        padding-right: 10px;
        width: 110px;

        margin-left: 5px;
        margin-right: 5px;
        border-radius: 8px;
        background-color: #0178D4;
        color: #fff;
    }

    .sendfile_btn:hover {
        cursor: pointer;
        filter: brightness(0.8);
    }

    /* 内容框 */
    .sendfile_pair {
        width: 150px;
        margin-left: auto;
        margin-right: auto;

        text-align: left;
        padding-bottom: 20px;
    }

    .sendfile_key {
        font-size: 15px;
        font-weight: 600;
    }

    #sendfile__ipt {
        height: 26px;
        font-size: 15px;
        width: 142px;
        /* border: 1px solid #000; */
    }

    .sendfile_val {
        width: 100%;
        height: 25px;

        font-size: 18px;
    }
</style>
        <div id="send_file_window" style="display: none;">
            <div class="send_file_title">
                请选择需要发送的文件
            </div>
            <div class="sendfile_pair">
                <div class="sendfile_key">发送方式</div>
                <select class="sendfile_val" id="sendfile_via_slt">
                    <option selected disabled="disabled" label="上传方式"></option>
                    <option>URL</option>
                    <option>本地上传</option>
                </select>
            </div>
            <div class="sendfile_pair" id="sendfile_address_pair" style="visibility: hidden;">
                <div class="sendfile_key">文件地址</div>
                <input type="text" class="sendfile_val" id="sendfile__ipt" placeholder="请输入文件地址">
            </div>
            <div class="sendfile_dialog_btnbox" style="margin-top: 10px;">
                <span class="sendfile_btn" id="sendfile_btn"
                    onclick="send_chat_File();document.getElementById('send_file_window').style.display='none';">
                    确定
                </span>
                <span class="sendfile_btn" id="sendfile_exit_btn"
                    onclick="document.getElementById('send_file_window').style.display='none';">
                    取消
                </span>
            </div>
        </div>

<!-- 签到检查对话框样式文件 -->
<style>
    #candidate_list_window {
        width: 350px;
        /* margin: auto; */
        position: absolute;

        background-color: rgb(250, 250, 250);
        border-radius: 8px;
        overflow: hidden;
    }

    .candidate_list_title {
        font-size: 20px;
        padding: 20px;
        padding-top: 30px;
    }

    /* 按键框 */
    .candidate_list_btnbox {
        width: 100%;
        padding-top: 10px;
        padding-bottom: 10px;

        /* padding-right: 20px; */
        text-align: center;

        background-color: #eee;
    }

    .candidate_list_btn {
        font-size: 15px;
        text-align: center;

        display: inline-block;
        padding: 3px;
        padding-left: 10px;
        padding-right: 10px;
        width: 110px;

        margin-left: 5px;
        margin-right: 5px;
        border-radius: 8px;
        background-color: #0178D4;
        color: #fff;
    }

    .candidate_list_btn:hover {
        cursor: pointer;
        filter: brightness(0.8);
    }

    /* 内容框 */
    .candidate_list_pair {
        width: 280px;
        margin-left: auto;
        margin-right: auto;
        font-size: 16px;

        text-align: left;
        padding-bottom: 5px;
        padding-top: 5px;
        text-align: center;
    }

    #candidate_list_box {
        width: 300px;
        height: 200px;

        overflow-y: scroll;
        margin-left: auto;
        margin-right: auto;

        background-color: floralwhite;
        text-align: center;
    }

    .candidate_list_name {
        display: inline-block;
        text-align: center;
        width: 120px;
    }

    .candidate_list_checkon {
        display: inline-block;
        text-align: center;
        width: 50px;
    }

    .candidate_list_interviewstate {
        display: inline-block;
        text-align: center;
        width: 90px;
    }

    #candidate_list_box_title {
        font-size: 15px;
    }
</style>
    <!-- 签到事件 -->
    <div id="candidate_list_window" style="display: none;">
        <div class="candidate_list_title">
            面试名单
        </div>
        <div id="candidate_list_box">
            <div class="candidate_list_pair" id="candidate_list_box_title">
                <span class="candidate_list_name">姓名</span>
                <span class="candidate_list_checkon" title="⭕表示迟到，√表示已签到，×表示未签到">签到</span>
                <span class="candidate_list_interviewstate" title="⭕表示缺勤，√表示已面试，-表示排队中">面试进度</span>
            </div>
            <div class="candidate_list_pair">
                <span class="candidate_list_name"></span>
                <span class="candidate_list_checkon" title="⭕表示迟到，√表示已签到，×表示未签到"></span>
                <span class="candidate_list_interviewstate" title="⭕表示缺勤，√表示已面试，-表示排队中"></span>
            </div>
        </div>
        <div style="width: 100%; height: 20px;"></div>
        <div class="candidate_list_btnbox" style="margin-top: 10px;">
            <span class="candidate_list_btn"
                onclick="document.getElementById('candidate_list_window').style.display='none';">
                确定
            </span>
            <span class="candidate_list_btn"
                onclick="document.getElementById('candidate_list_window').style.display='none';">
                关闭
            </span>
        </div>
    </div>

<!-- 计时器样式文件 -->
<style>
    #calculagraph_window {
        width: 300px;
        margin: auto;

        background-color: rgb(250, 250, 250);
        border-radius: 8px;

        overflow: hidden;
        position: absolute;
    }

    .calculagraph_title {
        font-size: 20px;
        padding: 20px;
        padding-top: 30px;
    }

    /* 按键框 */
    .calculagraph_dialog_btnbox {
        width: 100%;
        padding-top: 10px;
        padding-bottom: 10px;

        /* padding-right: 20px; */
        text-align: center;

        background-color: #eee;
    }

    .calculagraph_btn {
        font-size: 15px;
        text-align: center;

        display: inline-block;
        padding: 3px;
        padding-left: 10px;
        padding-right: 10px;
        width: 110px;

        margin-left: 5px;
        margin-right: 5px;
        border-radius: 8px;
        background-color: #0178D4;
        color: #fff;
    }

    .calculagraph_btn:hover {
        cursor: pointer;
        filter: brightness(0.8);
    }

    /* 内容框 */
    .calculagraph_pair {
        width: 100px;
        margin-left: auto;
        margin-right: auto;

        text-align: left;
        padding-top: 3px;
        padding-bottom: 3px;
    }

    .calculagraph_key {
        font-size: 15px;
        font-weight: 600;
    }

    .calculagraph_val {
        width: 100%;
        height: 25px;

        font-size: 18px;
    }

    /* 别框样式表 */
    #calculagraph_window2 {
        background-color: rgba(255, 255, 255, 0.8);
        border-radius: 8px;

        height: 90px;
        position: absolute;
        left: 50px;
        top: 50px;
        width: 240px;
        font-family: 'Consolas';
        text-align: center;
    }

    #calculagraph_time_show {
        font-size: 50px;
        display: block;
        margin-left: auto;
        margin-right: auto;
    }

    /* 别框按键部分 */
    #calculagraph_window2_btnbox {
        text-align: center;
    }

    .calculagraph_window2_btn {
        display: inline-block;
        margin-left: 10px;
        margin-right: 10px;

        width: 26px;
        height: 26px;
        border-radius: 50%;
    }

    .calculagraph_window2_btn img {
        margin-top: 3px;
    }

    .calculagraph_window2_btn:hover {
        background-color: #aaa;
        border-radius: 50%;
        cursor: pointer;
        user-select: none;
    }
</style>
<!-- 计时器事件 -->
    <div id="calculagraph_window" style="display: none;">
        <div class="calculagraph_title">
            定时器设置
        </div>
        <div class="calculagraph_pair">
            <div class="calculagraph_key">时</div>
            <input type="number" class="calculagraph_val" step="1" value="0" id="calculagraph_hr_val" max="5">
        </div>
        <div class="calculagraph_pair">
            <div class="calculagraph_key">分</div>
            <input type="number" class="calculagraph_val" step="1" value="0" id="calculagraph_min_val" max="59">
        </div>
        <div class="calculagraph_pair">
            <div class="calculagraph_key">秒</div>
            <input type="number" class="calculagraph_val" step="1" value="0" id="calculagraph_sec_val" max="59">
        </div>
        <div class="calculagraph_dialog_btnbox" style="margin-top: 10px;">
            <span class="calculagraph_btn" id="sign_in_btn" onclick="open_calculagraph();">
                确定
            </span>
            <span class="calculagraph_btn" id="sign_exit_btn"
                onclick="document.getElementById('calculagraph_window').style.display = 'none';">
                取消
            </span>
        </div>
    </div>

    <script>
        // 新建计时器
        function open_calculagraph() {
            if (document.getElementById('calculagraph_window2').style.display == "none") {
                // alert("开始计时");
                let caltime_hr = document.getElementById("calculagraph_hr_val").value;
                let caltime_min = document.getElementById("calculagraph_min_val").value;
                let caltime_sec = document.getElementById("calculagraph_sec_val").value;
                caltime_hr = "0" + caltime_hr;
                if (caltime_min < 10) caltime_min = "0" + caltime_min;
                if (caltime_sec < 10) caltime_sec = "0" + caltime_sec;

                document.getElementById('calculagraph_show_hr').innerHTML = caltime_hr;
                document.getElementById('calculagraph_show_min').innerText = caltime_min;
                document.getElementById('calculagraph_show_sec').innerText = caltime_sec;
                document.getElementById('calculagraph_window2').style.display = "block";
                document.getElementById("playpause_calculagraph_btn").title = "开始";
                document.getElementById('calculagraph_window').style.display = 'none';
            } else {
                alert("请结束计时器后再开始新建计时项目");
            }
        }

        // 停止计时
        function stopPlayCalculagraph() {
            document.getElementById("calculagraph_show_hr").innerText = "00";
            document.getElementById("calculagraph_show_min").innerText = "00";
            document.getElementById("calculagraph_show_sec").innerText = "00";
            if (document.getElementById("playpause_calculagraph_btn").title != "暂停") {
                document.getElementById("playpause_calculagraph_btn").title = "开始";
                setTimeout(() => {
                    document.getElementById("calculagraph_window2").style.display = "none";
                }, 3000);
            }
        }

        // 改变发送信息状态
        function changeCalculagraphChat() {
            if (document.getElementById("calculagraph_chat_control").title == "不发送提示消息") {
                document.getElementById("calculagraph_chat_control").title = "将不会发送提示消息";
                document.getElementById("calculagraph_chat_control").style.backgroundColor = "#999";
            } else {
                document.getElementById("calculagraph_chat_control").title = "不发送提示消息";
                document.getElementById("calculagraph_chat_control").style.backgroundColor = "rgba(0,0,0,0)";
            }
        }

        // 开始/暂停按键
        function startPlayCalculagraph() {
            if (document.getElementById("playpause_calculagraph_btn").title == "暂停") {
                document.getElementById("playpause_calculagraph_btn").title = "继续";
                return;
            }
            // 发送信息
            if (document.getElementById("calculagraph_chat_control").title != "不发送提示消息") {
                if (document.getElementById("playpause_calculagraph_btn").title == "继续") {
                    document.getElementById("send_message_content").value = "计时器已经继续，剩余时间为："
                        + (document.getElementById("calculagraph_show_hr").innerHTML) + "小时"
                        + (document.getElementById("calculagraph_show_min").innerHTML) + "分钟"
                        + (document.getElementById("calculagraph_show_sec").innerHTML) + "秒";
                    send_chat_message();
                } else {
                    document.getElementById("send_message_content").value = "计时器开始，计时时间为："
                        + (document.getElementById("calculagraph_show_hr").innerHTML) + "小时"
                        + (document.getElementById("calculagraph_show_min").innerHTML) + "分钟"
                        + (document.getElementById("calculagraph_show_sec").innerHTML) + "秒";
                    send_chat_message();
                }
            }

            // 处理时间的轮续
            document.getElementById("playpause_calculagraph_btn").title = "暂停";
            var calculagraph_itl = setInterval(() => {
                let hr_time = Number(document.getElementById("calculagraph_show_hr").innerHTML);
                let min_time = Number(document.getElementById("calculagraph_show_min").innerHTML);
                let sec_time = Number(document.getElementById("calculagraph_show_sec").innerHTML);
                let sumtime = sec_time + min_time * 60 + hr_time * 3600;
                // alert("0"+ sumtime)
                if (sumtime <= 0) {
                    // 计时停止
                    clearInterval(calculagraph_itl);
                    if (document.getElementById("calculagraph_chat_control").title != "不发送提示消息") {
                        // 发送消息 计时器已停止
                        document.getElementById("send_message_content").value = "计时器已经停止";
                        send_chat_message();
                    }
                    setTimeout(() => {
                        document.getElementById("calculagraph_window2").style.display = "none";
                    }, 3000);
                } else if (document.getElementById("playpause_calculagraph_btn").title != "暂停") {
                    // alert("2else");
                    // 暂停计时
                    clearInterval(calculagraph_itl);
                    if (document.getElementById("calculagraph_chat_control").title != "不发送提示消息") {
                        // 发送消息 计时器已停止
                        document.getElementById("send_message_content").value = "计时器已经暂停";
                        send_chat_message();
                    }
                } else {
                    // alert("3else");
                    // 继续转动
                    sumtime -= 1;
                    let now_num_time = Math.round(sumtime % 60);
                    document.getElementById("calculagraph_show_sec").innerHTML = now_num_time > 9 ? (now_num_time) : ("0" + (now_num_time));
                    sumtime = Math.floor(sumtime / 60);
                    now_num_time = Math.round(sumtime % 60);
                    document.getElementById("calculagraph_show_min").innerHTML = now_num_time > 9 ? (now_num_time) : ("0" + (now_num_time));
                    sumtime = Math.floor(sumtime / 60);
                    now_num_time = Math.round(sumtime % 60);
                    document.getElementById("calculagraph_show_hr").innerHTML = now_num_time > 9 ? (now_num_time) : ("0" + (now_num_time));
                }
            }, 1000);
        }
    </script>

    <div id="calculagraph_window2" style="display: none;">
        <div id="calculagraph_time_show">
            <span id="calculagraph_show_hr">00</span>:<span id="calculagraph_show_min">00</span>:<span
                id="calculagraph_show_sec">00</span>
        </div>
        <div id="calculagraph_window2_btnbox">
            <div class="calculagraph_window2_btn" id="playpause_calculagraph_btn" title="开始"
                onclick="startPlayCalculagraph();">
                <img src="../../../../../../source/pic/icon_play-pause.png" alt="" srcset="" width="20px">
            </div>
            <div class="calculagraph_window2_btn" title="结束" onclick="stopPlayCalculagraph();">
                <img src="../../../../../../source/pic/icon_stop.png" alt="" srcset="" width="20px">
            </div>
            <div class="calculagraph_window2_btn" id="calculagraph_chat_control" title="不发送提示消息"
                onclick="changeCalculagraphChat();">
                <img src="../../../../../../source/pic/icon_envelope-ban.png" alt="" srcset="" width="20px">
            </div>
        </div>
    </div>

<!-- 打开文件样式表 -->
<style>

    #chat_file_window {
        width: 600px;
        margin: auto;

        background-color: rgb(250, 250, 250);
        border-radius: 8px;

        overflow: hidden;
        text-align: center;
        position: absolute;
    }

    .chatfile_dialog_title {
        font-size: 20px;
        padding: 20px;
        text-align: left;
    }

    /* 按键框 */
    .chatfile_show_btnbox {
        width: 100%;
        padding-top: 10px;
        padding-bottom: 10px;

        /* padding-right: 20px; */
        text-align: right;

        background-color: #eee;
    }

    .chatfile_show_btn {
        font-size: 15px;
        text-align: center;

        display: inline-block;
        padding: 3px;
        padding-left: 10px;
        padding-right: 10px;
        width: 110px;

        margin-right: 10px;
        border-radius: 8px;
        background-color: #0178D4;
        color: #fff;
    }

    .chatfile_show_btn:hover {
        cursor: pointer;
        filter: brightness(0.8);
    }

    /* 显示框样式 */
    #chatfile_show_box {
        width: 500px;
        height: 400px;
        margin-left: auto;
        margin-right: auto;
        /* background-color: darkcyan; */
    }

    .chatfile_show_broad {
        width: 100%;
        height: 100%;
        display: none;
    }

    #chatfile_show_broad3 img {
        display: block;
        margin-left: auto;
        margin-right: auto;

        padding-top: 100px;
        padding-bottom: 30px;
    }
</style>
<!-- 打开对话文件 -->
    <div id="chat_file_window" style="display: none;">
        <div class="chatfile_dialog_title">
            文件预览
        </div>
        <div id="chatfile_show_box">
            <iframe src="" frameborder="0" class="chatfile_show_broad" id="chatfile_show_broad0"></iframe>
            <video src="" class="chatfile_show_broad" id="chatfile_show_broad1"></video>
            <img src="" alt="" class="chatfile_show_broad" id="chatfile_show_broad2">
            <div class="chatfile_show_broad" id="chatfile_show_broad3">
                <img src="../../../../../../source/pic/icon_file-excel.png" width="100px" alt="" srcset="">
                暂不支持当前的文件类型，请下载查看。支持的文件类型有docx、
                pptx、xlsx、ogg、mp4、webm、png、jpeg、gif、apng、svg、bmp、jpg。
            </div>
            <div class="chatfile_show_broad" id="chatfile_show_broad4"></div>
        </div>
        <div class="chatfile_show_btnbox" style="margin-top: 10px;">
            <span class="chatfile_show_btn" id="file_download_btn">
                下载
            </span>
            <span class="chatfile_show_btn" id="chatfile_show_exit_btn"
                onclick="document.getElementById('chat_file_window').style.display='none';">
                关闭
            </span>
        </div>
    </div>
<script src="./pdfOnLine.js"></script>
<script>
    function show_chat_file(url) {

        // 删除原有内容
        let tmp_file_broads = document.getElementsByClassName("chatfile_show_broad");
        for (let i = 0; i < tmp_file_broads.length; i++) {
            tmp_file_broads[i].setAttribute("src", "");
            tmp_file_broads[i].style.display = "none";
            if (i == 3) continue;
            tmp_file_broads[i].innerHTML = "";
        }

        // 开始展示
        let tuozhanming = url.split('.').pop();
        let src_web_address = "";
        if (tuozhanming == "doc" || tuozhanming=="docx") {
            console.log("展示doc文件");
            src_web_address = "https://view.officeapps.live.com/op/view.aspx?src=" + url;
            document.getElementById('chatfile_show_broad0').setAttribute("src", src_web_address);
            document.getElementById('chatfile_show_broad0').style.display = "block";
        } else if (tuozhanming == "pptx" || tuozhanming == "ppt") {
            console.log("展示pptx文件");
            src_web_address = "https://view.officeapps.live.com/op/embed.aspx?src=" + url;
            document.getElementById('chatfile_show_broad0').setAttribute("src", src_web_address);
            document.getElementById('chatfile_show_broad0').style.display = "block";
        } else if (tuozhanming == "xlsx") {
            console.log("展示xlsx文件");
            src_web_address = "https://view.officeapps.live.com/op/embed.aspx?src=" + url;
            document.getElementById('chatfile_show_broad0').setAttribute("src", src_web_address);
            document.getElementById('chatfile_show_broad0').style.display = "block";
        } else if (tuozhanming == "xls" || tuozhanming == "pdf") {
            console.log("展示xls文件");
            src_web_address = url;
            document.getElementById('chatfile_show_broad0').setAttribute("src", src_web_address);
            document.getElementById('chatfile_show_broad0').style.display = "block";
        } else if (tuozhanming == "webm" || tuozhanming == "mp4" || tuozhanming == "ogg") {
            console.log("展示视频文件ogg、mp4、webm");
            src_web_address = url;
            document.getElementById('chatfile_show_broad1').setAttribute("src", src_web_address);
            document.getElementById('chatfile_show_broad1').style.display = "block";
        } else if (["jpeg", "gif", "png", "apng", "svg", "bmp", "jpg"].indexOf(tuozhanming) != -1) {
            src_web_address = url;
            console.log("展示图片文件jpeg、gif、png、apng、svg、bmp");
            document.getElementById('chatfile_show_broad2').setAttribute("src", src_web_address);
            document.getElementById('chatfile_show_broad2').style.display = "block";
        } else if (tuozhanming == "pdf") {
            var options = {
                height: "400px",
                width: "500px",
                pdfOpenParams: { view: 'FitV', page: '0' },
                name: "pdf_file",
                fallbackLink: "<p>您的浏览器暂不支持此pdf，请下载最新的浏览器</p>"
            };
            PDFObject.embed(url, "#chatfile_show_broad4", options);
            document.getElementById("chatfile_show_broad4").style.display = "block";
        } else {
            console.log("无法显示。");
            document.getElementById('chatfile_show_broad3').style.display = "block";
        }

        document.getElementById("chat_file_window").style.display = "block";
        // 设置下载按键
        document.getElementById("file_download_btn").onclick = function() {
            window.open(url);
        }
    }

</script>


        <!-- 辅助竖线 -->
        <span class="size_change_width_btn" id="resize_fuzhu_btn0" style="display: none; background-color: rgba(255, 255, 255, 0.6);">
            <div>‖</div>
        </span>

        <script>
            var oDiv0 = document.getElementById('resize_btn1'),
                oDiv1 = document.getElementById('resize_btn2'),
                oDiv2 = document.getElementById('resize_btn3');
            var move0_left = document.getElementById("left_content").offsetWidth;
            var move0_top = 0;

            // 按键1的设置
            oDiv0.onmousedown = function (ev) {
                // 获取event对象，兼容性写法
                var ev = ev || event;

                // 鼠标按下时的位置
                var mouseDownX = ev.clientX;
                var mouseDownY = ev.clientY;

                // 方块上下左右四个边的位置和方块的长宽
                var L0 = this.offsetLeft;
                var R0 = this.offsetLeft + this.offsetWidth;
                var W = this.offsetWidth;
                var H = this.offsetHeight;

                // 设置方块的识别范围
                var areaL = L0 + 10;
                var areaR = R0 - 10;

                // 判断改变方块的大小的方向
                var changeL = mouseDownX < L0; // 左
                var changeR = mouseDownX > R0; // 右

                console.log("start");

                // IE8 取消默认行为-设置全局捕获
                if (oDiv0.setCapture) {
                    oDiv0.setCapture();
                }

                document.onmousemove = function (ev) {
                    var ev = ev || event;

                    // 鼠标移动时的鼠标位置
                    var mouseMoveX = ev.clientX;
                    var mouseMoveY = ev.clientY;

                    console.log("width:" + W);
                    document.getElementById("resize_fuzhu_btn0").style.display = "block";
                    if (mouseMoveX <= 205) {
                        document.getElementById("resize_fuzhu_btn0").style.left = 200 + "px";
                    } else if (mouseMoveX >= 
                        document.getElementById("center_content").offsetWidth +
                        document.getElementById("left_content").offsetWidth - 355) {
                        document.getElementById("resize_fuzhu_btn0").style.right =
                            Math.floor(document.getElementById("center_content").offsetWidth +
                            document.getElementById("left_content").offsetWidth - 350) + "px";
                    } else {
                        document.getElementById("resize_fuzhu_btn0").style.left = mouseMoveX - 5 + "px";
                    }

                    // 设置移动数据
                    move0_left = document.getElementById("resize_fuzhu_btn0").offsetLeft;
                    console.log(move0_left);
                }

                document.onmouseup = function () {

                    document.onmousemove = null;
                    document.getElementById("resize_fuzhu_btn0").style.display = "none";


                    // 调整尺寸
                    let left_move = move0_left;
                    let move_distance = document.getElementById("left_content").offsetWidth-left_move;
                    document.getElementById("left_content").style.width = document.getElementById("left_content").offsetWidth - move_distance + "px";
                    document.getElementById("center_content").style.width = document.getElementById("center_content").offsetWidth +   move_distance + "px";

                    // 中间视频栏目
                    document.getElementById("video1_box").style.height = Math.ceil(document.getElementById("center_content").offsetWidth * 0.75) + "px";
                    document.getElementById("video1_box").style.marginTop =
                        Math.floor(document.getElementById("center_content").offsetHeight/2 -
                            document.getElementById("video1_box").offsetHeight / 2) + "px";
                    
                    console.log("move_dis:"+move_distance);
                    // 释放全局捕获
                    if (oDiv0.releaseCapture) {
                        oDiv0.releaseCapture();
                    }
                }

                return false;
            }

            // 按键2的设置
            oDiv1.onmousedown = function (ev) {
                // 获取event对象，兼容性写法
                var ev = ev || event;

                // 鼠标按下时的位置
                var mouseDownX = ev.clientX;
                var mouseDownY = ev.clientY;

                // 方块上下左右四个边的位置和方块的长宽
                var L0 = this.offsetLeft;
                var R0 = this.offsetLeft + this.offsetWidth;
                var W = this.offsetWidth;
                var H = this.offsetHeight;

                // IE8 取消默认行为-设置全局捕获
                if (oDiv1.setCapture) {
                    oDiv1.setCapture();
                }

                document.onmousemove = function (ev) {
                    var ev = ev || event;

                    // 鼠标移动时的鼠标位置
                    var mouseMoveX = ev.clientX;
                    var mouseMoveY = ev.clientY;

                    let maxleft = document.getElementById("center_content").offsetLeft,
                        maxright1 = document.getElementById("right_content").offsetLeft +
                            document.getElementById("right_content").offsetWidth;

                    console.log("width:" +( window.innerWidth - document.getElementById("resize_fuzhu_btn0").offsetLeft));
                    document.getElementById("resize_fuzhu_btn0").style.display = "block";
                    if (mouseMoveX <= maxleft+356) {
                        document.getElementById("resize_fuzhu_btn0").style.left = Math.ceil(maxleft + 355) + "px";
                    } else if (mouseMoveX >= maxright1-216) {
                        document.getElementById("resize_fuzhu_btn0").style.right =
                            Math.floor(maxright1 - 200) + "px";
                    } else {
                        document.getElementById("resize_fuzhu_btn0").style.left = mouseMoveX - 5 + "px";
                    }

                    // 设置移动数据
                    move0_left = document.getElementById("resize_fuzhu_btn0").offsetLeft;
                    console.log(move0_left);
                }

                document.onmouseup = function () {

                    document.onmousemove = null;
                    document.getElementById("resize_fuzhu_btn0").style.display = "none";

                    console.log("former:" + document.getElementById("center_content").offsetWidth +
                        "\nlatter"+ document.getElementById("right_content").offsetWidth);

                    // 调整尺寸
                    let left_move = move0_left;
                    let move_distance = document.getElementById("right_content").offsetLeft-10-left_move;
                    document.getElementById("center_content").style.width = document.getElementById("center_content").offsetWidth - move_distance + "px";
                    document.getElementById("right_content").style.width = document.getElementById("right_content").offsetWidth + move_distance + "px";

                    // 中测视屏栏目
                    document.getElementById("video1_box").style.height = Math.ceil(document.getElementById("center_content").offsetWidth * 0.75) + "px";
                    document.getElementById("video1_box").style.marginTop =
                        Math.floor(document.getElementById("center_content").offsetHeight/2 -
                            document.getElementById("video1_box").offsetHeight / 2) + "px";
                    // 右侧栏目内容尺寸
                    document.getElementById("video2_box").style.height = Math.ceil(document.getElementById("right_content").offsetWidth * 0.75) + "px";
                    document.getElementById("message_box").style.height = Math.floor(document.getElementById("right_content").offsetHeight - document.getElementById("video2_box").offsetHeight - 1) + "px";


                    // 释放全局捕获
                    if (oDiv1.releaseCapture) {
                        oDiv1.releaseCapture();
                    }
                }

                return false;
            }

            // 按键3的设置
            oDiv2.onmousedown = function (ev) {
                // 获取event对象，兼容性写法
                var ev = ev || event;

                // 鼠标按下时的位置
                var mouseDownX = ev.clientX;
                var mouseDownY = ev.clientY;

                // 方块上下左右四个边的位置和方块的长宽
                var T0 = this.offsetTop;
                var B0 = this.offsetTop + this.offsetHeight;
                var W = this.offsetWidth;
                var H = this.offsetHeight;

                // IE8 取消默认行为-设置全局捕获
                if (oDiv2.setCapture) {
                    oDiv2.setCapture();
                }

                document.onmousemove = function (ev) {
                    var ev = ev || event;

                    // 鼠标移动时的鼠标位置
                    var mouseMoveX = ev.clientX;
                    var mouseMoveY = ev.clientY;

                    let maxtop = document.getElementById("assess_note_box").offsetTop,
                        maxbottom1 = document.getElementById("assess_note_box").offsetTop +
                            document.getElementById("assess_note_box").offsetHeight;

                    console.log("height:" + mouseMoveY);
                    document.getElementById("resize_fuzhu_btn2").style.width = 
                        document.getElementById("left_content").offsetWidth + "px";
                    document.getElementById("resize_fuzhu_btn2").style.display = "block";

                    if (mouseMoveY <= 255) {
                        document.getElementById("resize_fuzhu_btn2").style.top = 250 + "px";
                    } else if (mouseMoveY >= maxbottom1 - 215) {
                        document.getElementById("resize_fuzhu_btn2").style.bottom =
                            Math.floor(maxbottom1 - 210) + "px";
                    } else {
                        document.getElementById("resize_fuzhu_btn2").style.top = mouseMoveY - 5 + "px";
                    }

                    // 设置移动数据
                    move0_top = document.getElementById("resize_fuzhu_btn2").offsetTop;
                    console.log(move0_left);
                }

                document.onmouseup = function () {

                    document.onmousemove = null;
                    document.getElementById("resize_fuzhu_btn2").style.display = "none";

                    // 调整尺寸
                    let top_move = move0_top;
                    let move_distance = document.getElementById("resize_btn3").offsetTop - top_move;
                    document.getElementById("vitae_box").style.height = document.getElementById("vitae_box").offsetHeight - move_distance + "px";
                    document.getElementById("assess_note_box").style.height = document.getElementById("assess_note_box").offsetHeight + move_distance + "px";

                    // 释放全局捕获
                    if (oDiv2.releaseCapture) {
                        oDiv2.releaseCapture();
                    }
                }

                return false;
            }

        </script>
    </div>


    <!-- 后端内容 -->
    <script src="../../../assets/js/jquery.min.js"></script>
    <script src="../../../assets/js/jquery.i18n.properties.min.js"></script>
    <script src="../../../assets/js/metisMenu.min.js"></script>
    <script src="../../../assets/js/jquery.slimscroll.min.js"></script>
    <script src="../../../assets/js/bootstrap.min.js"></script>
    <script src="../../../assets/js/vconsole.min.js"></script>
    <script src="../../../assets/js/custom.js"></script>
    <script src="../../../KeyCenter.js"></script>
    <script src="index.js"></script>
</body>
</html>